<%- include('./header') %>

<div class="content-body">
  <div class="container-fluid">
    <div class="row">
      <div class="col-xl-12">
        <div class="card">
          <div class="card-header d-flex justify-content-between align-items-center">
            <h4 class="card-title mb-0">üèÜ Monthly Leaderboard ‚Äì <span class="text-primary">FileMakr</span></h4>
            <span class="badge badge-success">Updated Monthly</span>
          </div>

          <div class="card-body">
            <p class="text-muted mb-4">
              This leaderboard highlights our top-performing contributors based on activity, engagement, and referrals. All metrics are evaluated monthly for rewards and recognition.
            </p>

            <% const months = ['Current', 'Last']; %>
            <% months.forEach(month => { %>
              <h5 class="mt-4 mb-3"><%= month === 'Current' ? 'üìÖ This Month' : 'üóìÔ∏è Last Month' %></h5>
              <div class="table-responsive mb-5">
                <table class="table table-hover table-bordered shadow-sm mb-0">
                  <thead class="thead-dark text-center">
                    <tr>
                      <th scope="col">Rank</th>
                      <th scope="col">Name</th>
                      <th scope="col">Total Points</th>
                      <th scope="col">Followers Gained</th>
                      <th scope="col">Google Reviews</th>
                      <th scope="col">Activity Streak<br><small>(days)</small></th>
                      <th scope="col">Brand Ambassador<br><small>Referrals</small></th>
                      <th scope="col">Eligible: Points</th>
                      <th scope="col">Eligible: Followers</th>
                      <th scope="col">Eligible: Reviews</th>
                      <th scope="col">Eligible: Streak</th>
                      <th scope="col">Eligible: Referrals</th>
                    </tr>
                  </thead>
                  <tbody>
                    <% 
                      let rank = 1;
                      leaderboard
                        .filter(user => user.month_label === month)
                        .forEach(user => { 
                    %>
                      <tr class="text-center align-middle">
                        <td><strong><%= rank++ %></strong></td>
                        <td class="text-left"><%= user.name %></td>
                        <td><%= user.total_points %></td>
                        <td><%= user.follower_count %></td>
                        <td><%= user.google_reviews %></td>
                        <td><%= user.activity_streak %></td>
                        <td><%= user.brand_ambassador_referral %></td>
                        <td><%= user.eligible_points %></td>
                        <td><%= user.eligible_followers %></td>
                        <td><%= user.eligible_reviews %></td>
                        <td><%= user.eligible_streak %></td>
                        <td><%= user.eligible_brand_ambassador_referral %></td>
                      </tr>
                    <% }) %>
                  </tbody>
                </table>
              </div>
            <% }) %>

          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<%- include('./footer') %>
