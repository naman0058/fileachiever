<%include ./header.ejs %>

<style>
	body {
		background: #f4f6f9;
		font-family: 'Poppins', sans-serif;
	}
	.leaderboard-container {
		max-width: 700px;
		margin: 50px auto;
	}
	.leaderboard-card {
		background: white;
		padding: 30px;
		border-radius: 12px;
		box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
	}
	.leaderboard-title {
		text-align: center;
		font-weight: 700;
		font-size: 24px;
		margin-bottom: 20px;
	}
	table {
		width: 100%;
		border-collapse: separate;
		border-spacing: 0 8px;
		
	}
	
	th {
		padding: 12px;
	}
	tbody tr {
		background: white;
		transition: 0.3s;
		border-radius: 8px;
	}
	tbody tr:hover {
		transform: scale(1.02);
		box-shadow: 0px 4px 8px rgba(0, 0, 0, 0.1);
	}
	td {
		padding: 12px;
		font-weight: 600;
	}
	.gold { color: gold; font-weight: bold; }
	.silver { color: silver; font-weight: bold; }
	.bronze { color: #cd7f32; font-weight: bold; }


	#claimPointsBtn {
    position: relative;
    z-index: 10; /* Bring button to front */
    pointer-events: auto; /* Ensure it's clickable */
	margin-bottom: 20px;
}

#pointSystem{
	position: relative;
    z-index: 10; /* Bring button to front */
    pointer-events: auto; /* Ensure it's clickable */
	margin-bottom: 20px;
}
</style>
		
		<!--**********************************
            Content body start
        ***********************************-->
        <div class="content-body">
            <!-- row -->	
			<div class="page-titles">
				<ol class="breadcrumb">
					<li><h5 class="bc-title">Dashboard</h5></li>
					
				</ol>
			</div>
			<div class="container-fluid">

				<div class="row">

					
					<div class="container my-4">
						<div class="card shadow-lg border-0 rounded-4 p-4" style="background: #f8f9fa;">
							<h3 class="text-center fw-bold mb-4 text-black">
								üèÜ Rank-Based Rewards
							</h3>
					
							<div class="p-4 border rounded-3 bg-white">
								<div class="table-responsive"> <!-- Added this wrapper for responsiveness -->
									<table class="table table-bordered text-center">
										<thead class="bg-dark text-white">
											<tr>
												<th class="p-3">Rank</th>
												<th class="p-3">ü•á Rank 1</th>
												<th class="p-3">ü•à Rank 2</th>
												<th class="p-3">ü•â Rank 3</th>
												<th class="p-3">‚≠ê Rank 4</th>
												<th class="p-3">‚≠ê Rank 5</th>
												<th class="p-3">‚≠ê Rank 6</th>
												<th class="p-3">‚≠ê Rank 7</th>
												<th class="p-3">‚≠ê Rank 8</th>
											</tr>
										</thead>
										<tbody>
											<tr>
												<td class="fw-bold text-success p-3">Amount</td>
												<td class="bg-success text-white fw-bold p-3">‚Çπ1000</td>
												<td class="bg-primary text-white fw-bold p-3">‚Çπ700</td>
												<td class="bg-warning text-dark fw-bold p-3">‚Çπ500</td>
												<td class="bg-secondary text-white fw-bold p-3">‚Çπ300</td>
												<td class="bg-dark text-white fw-bold p-3">‚Çπ200</td>
												<td class="bg-dark text-white fw-bold p-3">‚Çπ150</td>
												<td class="bg-dark text-white fw-bold p-3">‚Çπ100</td>
												<td class="bg-dark text-white fw-bold p-3">‚Çπ50</td>
											</tr>
										</tbody>
									</table>
								</div> <!-- End table-responsive -->
							</div>
						</div>
					</div>
					


				
					


					<div class="modal fade" id="pointSystemModal" tabindex="-1" aria-labelledby="pointSystemModalLabel" aria-hidden="true">
						<div class="modal-dialog modal-dialog-centered modal-dialog-scrollable">
							<div class="modal-content">
								<div class="modal-header">
									<h5 class="modal-title" id="pointSystemModalLabel">Point System</h5>
									<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
								</div>
								<div class="modal-body">
									<div class="table-responsive">
										<table class="table table-striped">
											<thead>
												<tr>
													<th>Activity</th>
													<th>Points</th>
												</tr>
											</thead>
											<tbody id="pointSystemTable">
												<!-- Data will be dynamically inserted here -->
											</tbody>
										</table>
									</div>
								</div>
							</div>
						</div>
					</div>
					

					<!-- Claim Points Button -->

					<div class="col-12 d-flex justify-content-end gap-3">
						<button type="button" class="btn btn-primary w-auto" id="pointSystem" data-bs-toggle="modal" data-bs-target="#pointSystemModal">
							Point System
						</button>
						<button type="button" class="btn btn-dark w-auto" id="claimPointsBtn">Claim Points</button>
					</div>



					

					
<!-- Hidden Form -->
<div class="col-12">
    <div id="claimFormContainer" style="display: none;">
        <div class="card p-4 shadow">
            <h4 class="mb-3">Submit Your Activity</h4>
            <form id="claimForm" enctype="multipart/form-data">
                <!-- Activity Type (Dropdown) -->
                <div class="mb-3">
                    <label for="activityType" class="form-label">Activity Type</label>
                    <select class="form-control" id="activityType" name="activityType" required>
                        <option value="">Select Activity</option>
                        <!-- Dynamically filled options -->
                    </select>
                </div>

                <!-- Upload Proof (File Input) -->
                <div class="mb-3">
                    <label for="proofUpload" class="form-label">Upload Proof (Screenshot)</label>
                    <input type="file" class="form-control" id="proofUpload" name="proof" accept="image/*" required>
                </div>

                <!-- Submit Button with Loader -->
                <button type="submit" id="submitBtn" class="btn btn-success">
                    Submit
                </button>
                <div id="loader" class="spinner-border text-success" style="display: none;" role="status">
                    <span class="visually-hidden">Loading...</span>
                </div>
            </form>
        </div>
    </div>
</div>


<script src="https://cdn.jsdelivr.net/npm/browser-image-compression@2.0.1/dist/browser-image-compression.js"></script>

<!-- JavaScript -->
<script>
document.addEventListener("DOMContentLoaded", function() {
    const claimBtn = document.getElementById("claimPointsBtn");
    const claimFormContainer = document.getElementById("claimFormContainer");
    const activityTypeSelect = document.getElementById("activityType");
    const claimForm = document.getElementById("claimForm");
    const submitBtn = document.getElementById("submitBtn");
    const loader = document.getElementById("loader");

    // Show form when "Claim Points" button is clicked
    claimBtn.addEventListener("click", function() {
        claimFormContainer.style.display = "block";
        fetchActivityTypes();
    });

    // Fetch activity types dynamically from the database (Simulated API call)
    function fetchActivityTypes() {
        fetch('/shopkeeper/getActivityTypes')
            .then(response => response.json())
            .then(data => {
                activityTypeSelect.innerHTML = '<option value="">Select Activity</option>';
                data.forEach(activity => {
                    activityTypeSelect.innerHTML += `<option value="${activity.id}">${activity.activity_name}</option>`;
                });
            })
            .catch(error => console.error('Error fetching activity types:', error));
    }

    // Form submission
//     claimForm.addEventListener("submit", function(event) {
//         event.preventDefault();

//         // Validate form
//         if (activityTypeSelect.value === "") {
//             alert("Please select an activity type.");
//             return;
//         }
//         if (!document.getElementById("proofUpload").files.length) {
//             alert("Please upload a proof screenshot.");
//             return;
//         }

//         // Show loader and disable submit button
//         loader.style.display = "inline-block";
//         submitBtn.disabled = true;

//         // Prepare Form Data
//         const formData = new FormData(claimForm);

//         // API Call
//         fetch('/shopkeeper/submitClaim', {
//             method: "POST",
//             body: formData
//         })
//         .then(response => response.json())
//         .then(result => {
//             alert(result.message);
//             claimForm.reset();
//             claimFormContainer.style.display = "none";
//         })
//         .catch(error => {
//             console.error("Error submitting claim:", error);
//             alert("An error occurred. Please try again.");
//         })
//         .finally(() => {
//             loader.style.display = "none";
//             submitBtn.disabled = false;
//         });
//     });
// });


claimForm.addEventListener("submit", async function(event) {
    event.preventDefault();

    if (activityTypeSelect.value === "") {
        alert("Please select an activity type.");
        return;
    }

    const fileInput = document.getElementById("proofUpload");
    const file = fileInput.files[0];

    if (!file) {
        alert("Please upload a proof screenshot or video.");
        return;
    }
	

    // Validate file size and type
    if (file.size > 70 * 1024 * 1024) { // over 70MB
        if (file.type.startsWith("image/")) {
            // Compress image
            try {
                const compressedImage = await imageCompression(file, {
                    maxSizeMB: 2,
                    maxWidthOrHeight: 1920,
                    useWebWorker: true
                });

                // Replace original file with compressed one
                const dataTransfer = new DataTransfer();
                dataTransfer.items.add(compressedImage);
                fileInput.files = dataTransfer.files;

            } catch (error) {
                console.error("Image compression failed:", error);
                alert("Image compression failed.");
                return;
            }
        } else if (file.type.startsWith("video/")) {
            alert("Video is too large. Please compress it manually using HandBrake or an online tool before uploading.");
            return;
        }
    }

    loader.style.display = "inline-block";
    submitBtn.disabled = true;

    const formData = new FormData(claimForm);

    fetch('/shopkeeper/submitClaim', {
        method: "POST",
        body: formData
    })
    .then(response => response.json())
    .then(result => {
        alert(result.message);
        claimForm.reset();
        claimFormContainer.style.display = "none";
    })
    .catch(error => {
        console.error("Error submitting claim:", error);
        alert("An error occurred. Please try again.");
    })
    .finally(() => {
        loader.style.display = "none";
        submitBtn.disabled = false;
    });
});

</script>



<div class="col-lg-6" style="margin-top: -35px;">
					 <div class="container leaderboard-container">
        <div class="leaderboard-card">
            <h2 class="leaderboard-title">üèÜ Monthly Leaderboard</h2>
            <table class="table text-center">
                <thead>
                    <tr style="background: linear-gradient(45deg, #ff9a9e, #fad0c4);">
                        <th style="background: linear-gradient(45deg, #ff9a9e, #fad0c4);">Rank</th>
                        <th style="background: linear-gradient(45deg, #ff9a9e, #fad0c4);">Ambassador</th>
                        <th style="background: linear-gradient(45deg, #ff9a9e, #fad0c4);">Points</th>
                    </tr>
                </thead>
                <tbody>
					<% result[6].slice(0, 8).forEach((shopkeeper, index) => { %>
                        <tr style="border-radius: 10px;">
                            <td>
                                <% if (index === 0) { %> ü•á <span class="gold">#1</span> <% } %>
                                <% if (index === 1) { %> ü•à <span class="silver">#2</span> <% } %>
                                <% if (index === 2) { %> ü•â <span class="bronze">#3</span> <% } %>
                                <% if (index > 2) { %> #<%= index + 1 %> <% } %>
                            </td>
                            <td>
                                <% if (index === 0) { %> ü•á <span class="gold"><%= shopkeeper.name %></span> <% } %>
                                <% if (index === 1) { %> ü•à <span class="silver"><%= shopkeeper.name %></span> <% } %>
                                <% if (index === 2) { %> ü•â <span class="bronze"><%= shopkeeper.name %></span> <% } %>
                                <% if (index > 2) { %> <%= shopkeeper.name %> <% } %>
                            </td>
                            <td>
                                <% if (index === 0) { %> ü•á <span class="gold"><%= shopkeeper.total_points %></span> <% } %>
                                <% if (index === 1) { %> ü•à <span class="silver"><%= shopkeeper.total_points %></span> <% } %>
                                <% if (index === 2) { %> ü•â <span class="bronze"><%= shopkeeper.total_points %></span> <% } %>
                                <% if (index > 2) { %> <%= shopkeeper.total_points %> <% } %>
                            </td>
                        </tr>
                    <% }); %>
                </tbody>
            </table>
        </div>
    </div>
				</div>



				
				<div class="col-lg-6">
					<div class="row">
						<!-- My Rank Card -->
						<div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 col-6" style="margin-top: -50px;">
							<div class="leaderboard-container">
								<div class="leaderboard-card shadow-lg p-2 rounded text-center" style="background: linear-gradient(135deg, #F4EDE8, #E3DCD2); color: #3D3D3D;">
									<h2 class="leaderboard-title fw-bold" style="color: #2C2C2C;"> My Rank</h2>
									<div class="card-body">
										<h1 class="display-4 fw-bold" style="margin-top: 0px; font-size: 50px;">
											<%= result[7][0].rank_position %>
										</h1>
									</div>
								</div>
							</div>
						</div>
				
						<!-- My Points Card -->
						<div class="col-lg-6 col-md-6 col-sm-6 col-xs-6 col-6" style="margin-top: -50px;">
							<div class="leaderboard-container">
								<div class="leaderboard-card shadow-lg p-2 rounded text-center" style="background: linear-gradient(135deg, #ECECEC, #D6D6D6); color: #3D3D3D;">
									<h2 class="leaderboard-title fw-bold" style="color: #2C2C2C;"> My Points</h2>
									<div class="card-body">
										<h1 class="display-4 fw-bold" style="font-size: 50px;">
											<%= result[7][0].total_points %>
										</h1>
									</div>
								</div>
							</div>
						</div>



						<div class="col-lg-12" style="margin-top: -50px;">
							<div class="container leaderboard-container">
			   <div class="leaderboard-card">
				   <h2 class="leaderboard-title"> Recent Activites</h2>
				   <table class="table text-center">
					   <thead>
						   <tr style="background: linear-gradient(45deg, #ff9a9e, #fad0c4);">
							   <th style="background: linear-gradient(45deg, #ff9a9e, #fad0c4);">Activity</th>
							   <th style="background: linear-gradient(45deg, #ff9a9e, #fad0c4);">Points</th>
							   <th style="background: linear-gradient(45deg, #ff9a9e, #fad0c4);">Status</th>

						   </tr>
					   </thead>
					   <tbody>
						   <% result[8].slice(0, 4).forEach((shopkeeper, index) => { %>
							   <tr style="border-radius: 10px;">
								   <td>
									<%= shopkeeper.activity %>
								   </td>

								   <td>
									<%= shopkeeper.points %>
								   </td>

								   <td>
									<%= shopkeeper.status.toUpperCase() %>
								   </td>
								 
								   
							   </tr>
						   <% }); %>
					   </tbody>
				   </table>
			   </div>
		   </div>
					   </div>

					</div>
				</div>
				



                    <h3>Sales Overview</h3>

					<div class="col-xl-12 wid-100">
						<div class="row">
							<div class="col-xl-3 col-sm-6">
								<div class="card chart-grd same-card">
									<div class="card-body depostit-card p-0">
										<div class="depostit-card-media d-flex justify-content-between pb-0">
											<div>
												<h6>Ongoing Order</h6>
												<h3><%=result[0][0].counter%></h3>
											</div>

										</div>
									</div>
								</div>
							</div>
							<div class="col-xl-3 col-sm-6">
								<div class="card chart-grd same-card">
									<div class="card-body depostit-card p-0">
										<div class="depostit-card-media d-flex justify-content-between pb-0">
											<div>
												<h6>Complete Order</h6>
												<h3><%=result[1][0].counter%></h3>
											</div>
											
										</div>
									</div>
								</div>
							</div>
							<div class="col-xl-3 col-sm-6">
								<div class="card chart-grd same-card">
									<div class="card-body depostit-card p-0">
										<div class="depostit-card-media d-flex justify-content-between pb-0">
											<div>
												<h6>Total Order</h6>
												<h3><%=result[2][0].counter%></h3>
											</div>
											
										</div>
									</div>
								</div>
							</div>
							<div class="col-xl-3 col-sm-6 same-card">
								<div class="card">
									<div class="card-body depostit-card">
										<div class="depostit-card-media d-flex justify-content-between style-1">
											<div>
												<h6>Cancel Order</h6>
												<h3><%=result[3][0].counter%></h3>
											</div>
											
										</div>
									
									</div>
								</div>
							</div>

                            <h3>Profit Analysis</h3>



                            <div class="col-xl-4 col-sm-6">
								<div class="card chart-grd same-card">
									<div class="card-body depostit-card p-0">
										<div class="depostit-card-media d-flex justify-content-between pb-0">
											<div style="margin-bottom: 20px;">
												<h6>Project Report Earnings</h6>
												<h3>Rs. <%= result[4][0].counter ? result[4][0].counter : '0' %></h3>
											</div>
											
										</div>
										<div id="NewCustomers"></div>
									</div>
								</div>
							</div>
							<div class="col-xl-4 col-sm-6">
								<div class="card chart-grd same-card">
									<div class="card-body depostit-card p-0">
										<div class="depostit-card-media d-flex justify-content-between pb-0">
											<div>
												<h6>Source Code Earnings</h6>
												<h3>Rs. <%= result[5][0].counter ? result[5][0].counter : '0' %></h3>
											</div>
											
										</div>
										<div id="NewExperience"></div>
									</div>
								</div>
							</div>
							<div class="col-xl-4 col-sm-6">
								<div class="card chart-grd same-card">
									<div class="card-body depostit-card p-0">
										<div class="depostit-card-media d-flex justify-content-between pb-0">
											<div style="margin-bottom: 20px;">
												<h6>Total Earnings</h6>
												<h3>Rs. <%=result[4][0].counter + result[5][0].counter%></h3>
											</div>
											
										</div>
										<div id="NewExperience"></div>
									</div>
								</div>
							</div>
						



						</div>
					</div>

				</div>
			
			</div>







            
        </div>
		
        <!--**********************************
            Content body end
        ***********************************-->
		<div class="offcanvas offcanvas-end customeoff" tabindex="-1" id="offcanvasExample">
		  <div class="offcanvas-header">
		  <h5 class="modal-title" id="#gridSystemModal">Add Employee</h5>
			<button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close">
				<i class="fa-solid fa-xmark"></i>
			</button>
		  </div>
		  <div class="offcanvas-body">
			<div class="container-fluid">
				<div>
					<label>Profile Picture</label>
					<div class="dz-default dlab-message upload-img mb-3">	
						<form action="#" class="dropzone">
							<svg width="41" height="40" viewBox="0 0 41 40" fill="none" xmlns="http://www.w3.org/2000/svg">
								<path d="M27.1666 26.6667L20.4999 20L13.8333 26.6667" stroke="#DADADA" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
								<path d="M20.5 20V35" stroke="#DADADA" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
								<path d="M34.4833 30.6501C36.1088 29.7638 37.393 28.3615 38.1331 26.6644C38.8731 24.9673 39.027 23.0721 38.5703 21.2779C38.1136 19.4836 37.0724 17.8926 35.6111 16.7558C34.1497 15.619 32.3514 15.0013 30.4999 15.0001H28.3999C27.8955 13.0488 26.9552 11.2373 25.6498 9.70171C24.3445 8.16614 22.708 6.94647 20.8634 6.1344C19.0189 5.32233 17.0142 4.93899 15.0001 5.01319C12.9861 5.0874 11.015 5.61722 9.23523 6.56283C7.45541 7.50844 5.91312 8.84523 4.7243 10.4727C3.53549 12.1002 2.73108 13.9759 2.37157 15.959C2.01205 17.9421 2.10678 19.9809 2.64862 21.9222C3.19047 23.8634 4.16534 25.6565 5.49994 27.1667" stroke="#DADADA" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
								<path d="M27.1666 26.6667L20.4999 20L13.8333 26.6667" stroke="#DADADA" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
							</svg>
							<div class="fallback">
								<input name="file" type="file" multiple>
								
							</div>
						</form>
					</div>	
				</div>
				<form>
					<div class="row">
						<div class="col-xl-6 mb-3">
							<label for="exampleFormControlInput1" class="form-label">Employee ID <span class="text-danger">*</span></label>
							<input type="text" class="form-control" id="exampleFormControlInput1" placeholder="">
						</div>	
						<div class="col-xl-6 mb-3">
							<label for="exampleFormControlInput2" class="form-label">Employee Name<span class="text-danger">*</span></label>
							<input type="text" class="form-control" id="exampleFormControlInput2" placeholder="">
						</div>	
						<div class="col-xl-6 mb-3">
							<label for="exampleFormControlInput3" class="form-label">Employee Email<span class="text-danger">*</span></label>
							<input type="email" class="form-control" id="exampleFormControlInput3" placeholder="">
						</div>
						<div class="col-xl-6 mb-3">
							<label for="exampleFormControlInput4" class="form-label">Password<span class="text-danger">*</span></label>
							<input type="password" class="form-control" id="exampleFormControlInput4" placeholder="">
						</div>
						<div class="col-xl-6 mb-3">
							<label class="form-label">Designation<span class="text-danger">*</span></label>
							<select class="default-select style-1 form-control">
								<option  data-display="Select">Please select</option>
								<option value="html">Software Engineer</option>
								<option value="css">Civil Engineer</option>
								<option value="javascript">Web Doveloper</option>
							</select>
						</div>	
						<div class="col-xl-6 mb-3">
							<label class="form-label">Department<span class="text-danger">*</span></label>
							<select class="default-select style-1 form-control">
								<option  data-display="Select">Please select</option>
								<option value="html">Software</option>
								<option value="css">Doit</option>
								<option value="javascript">Designing</option>
							</select>
						</div>
						<div class="col-xl-6 mb-3">
							<label class="form-label">Country<span class="text-danger">*</span></label>
							<select class="default-select style-1 form-control">
								<option  data-display="Select">Please select</option>
								<option value="html">Ind</option>
								<option value="css">USA</option>
								<option value="javascript">UK</option>
							</select>
						</div>
						<div class="col-xl-6 mb-3">
							<label for="exampleFormControlInput88" class="form-label">Mobile<span class="text-danger">*</span></label>
							<input type="number" class="form-control" id="exampleFormControlInput88" placeholder="">
						</div>
						<div class="col-xl-6 mb-3">
							<label class="form-label">Gender<span class="text-danger">*</span></label>
							<select class="default-select style-1 form-control">
								<option  data-display="Select">Please select</option>
								<option value="html">Male</option>
								<option value="css">Female</option>
								<option value="javascript">Other</option>
							</select>
						</div>
						<div class="col-xl-6 mb-3">
							<label for="exampleFormControlInput99" class="form-label">Joining Date<span class="text-danger">*</span></label>
							<input type="date" class="form-control" id="exampleFormControlInput99">
						</div>
						<div class="col-xl-6 mb-3">
							<label for="exampleFormControlInput8" class="form-label">Date of Birth<span class="text-danger">*</span></label>
							<input type="date" class="form-control" id="exampleFormControlInput8">
						</div>
						<div class="col-xl-6 mb-3">
							<label for="exampleFormControlInput10" class="form-label">Reporting To<span class="text-danger">*</span></label>
							<input type="text" class="form-control" id="exampleFormControlInput10" placeholder="">
						</div>		
						<div class="col-xl-6 mb-3">
							<label class="form-label">Language Select<span class="text-danger">*</span></label>
							<select class="default-select style-1 form-control">
								<option  data-display="Select">Please select</option>
								<option value="html">English</option>
								<option value="css">Hindi</option>
								<option value="javascript">Canada</option>
							</select>
						</div>
						<div class="col-xl-6 mb-3">
							<label class="form-label">User Role<span class="text-danger">*</span></label>
							<select class="default-select style-1 form-control">
								<option  data-display="Select">Please select</option>
								<option value="html">Parmanent</option>
								<option value="css">Parttime</option>
								<option value="javascript">Per Hours</option>
							</select>
						</div>
						<div class="col-xl-12 mb-3">
							<label class="form-label">Address<span class="text-danger">*</span></label>
							<textarea rows="3" class="form-control"></textarea>
						</div>
						<div class="col-xl-12 mb-3">
							<label class="form-label">About<span class="text-danger">*</span></label>
							<textarea rows="3" class="form-control"></textarea>
						</div>	
					</div>
					<div>
						<button class="btn btn-danger light ms-1">Cancel</button>
						<button class="btn btn-primary me-1">Submit</button>
					</div>
				</form>
			  </div>
		  </div>
		</div>		
		
		<div class="offcanvas offcanvas-end customeoff" tabindex="-1" id="offcanvasExample1">
		  <div class="offcanvas-header">
		  <h5 class="modal-title" id="#gridSystemModal1">Add New Task</h5>
			<button type="button" class="btn-close" data-bs-dismiss="offcanvas" aria-label="Close">
				<i class="fa-solid fa-xmark"></i>
			</button>
		  </div>
		  <div class="offcanvas-body">
			<div class="container-fluid">
				<form>
					<div class="row">
						<div class="col-xl-6 mb-3">
							<label for="exampleFormControlInputfirst" class="form-label">Title<span class="text-danger">*</span></label>
							<input type="text" class="form-control" id="exampleFormControlInputfirst" placeholder="Title">
						</div>	
						<div class="col-xl-6 mb-3">
							<label class="form-label">Project<span class="text-danger">*</span></label>
							<select class="default-select style-1 form-control">
								<option  data-display="Select">Project</option>
								<option value="html">Salesmate</option>
								<option value="css">ActiveCampaign</option>
								<option value="javascript">Insightly</option>
							</select>
						</div>	
						<div class="col-xl-6 mb-3">
							<label for="exampleFormControlInputthree" class="form-label">Start Date<span class="text-danger">*</span></label>
							<input type="date" class="form-control" id="exampleFormControlInputthree">
						</div>
						<div class="col-xl-6 mb-3">
							<label for="exampleFormControlInputfour" class="form-label">End Date<span class="text-danger">*</span></label>
							<input type="date" class="form-control" id="exampleFormControlInputfour">
						</div>
						<div class="col-xl-6 mb-3">
							<label class="form-label">Estimated Hour<span class="text-danger">*</span></label>
							<div class="input-group">
								<input type="text" class="form-control" value="09:30"><span class="input-group-text"><i
											class="fas fa-clock"></i></span>
                            </div>
						</div>
						<div class="col-xl-6 mb-3">
							<label class="form-label">Status<span class="text-danger">*</span></label>
							<select class="default-select style-1 form-control">
								<option  data-display="Select">Status</option>
								<option value="html">In Progess</option>
								<option value="css">Pending</option>
								<option value="javascript">Completed</option>
							</select>
						</div>
						<div class="col-xl-6 mb-3">
							<label class="form-label">priority<span class="text-danger">*</span></label>
							<select class="default-select style-1 form-control">
								<option  data-display="Select">priority</option>
								<option value="html">Hight</option>
								<option value="css">Medium</option>
								<option value="javascript">Low</option>
							</select>
						</div>
						<div class="col-xl-6 mb-3">
							<label class="form-label">Category<span class="text-danger">*</span></label>
							<select class="default-select style-1 form-control">
								<option  data-display="Select">Category</option>
								<option value="html">Designing</option>
								<option value="css">Development</option>
								<option value="javascript">react developer</option>
							</select>
						</div>
						<div class="col-xl-6 mb-3">
							<label class="form-label">Permission<span class="text-danger">*</span></label>
							<select class="default-select style-1 form-control">
								<option  data-display="Select">Permission</option>
								<option value="html">Public</option>
								<option value="css">Private</option>
							</select>
						</div>
						<div class="col-xl-6 mb-3">
							<label class="form-label">Deadline add<span class="text-danger">*</span></label>
							<select class="default-select style-1 form-control">
								<option  data-display="Select">Deadline</option>
								<option value="html">Yes</option>
								<option value="css">No</option>
							</select>
						</div>
						<div class="col-xl-6 mb-3">
							<label class="form-label">Assigned to<span class="text-danger">*</span></label>
							<select class="default-select style-1 form-control">
								<option  data-display="Select">Assigned</option>
								<option value="html">Bernard</option>
								<option value="css">Sergey Brin</option>
								<option value="javascript"> Larry Ellison</option>
							</select>
						</div>
						<div class="col-xl-6 mb-3">
							<label class="form-label">Responsible Person<span class="text-danger">*</span></label>
							<input name='tagify' class="form-control py-0 ps-0 h-auto" value='James, Harry'>
							
						</div>
						<div class="col-xl-12 mb-3">
							<label class="form-label">Description<span class="text-danger">*</span></label>
							<textarea rows="3" class="form-control"></textarea>
						</div>
						<div class="col-xl-12 mb-3">
							<label class="form-label">Summary<span class="text-danger">*</span></label>
							<textarea rows="3" class="form-control"></textarea>
						</div>
						
					</div>
					<div>
						<button class="btn btn-danger light ms-1">Cancel</button>
						<button class="btn btn-primary me-1">Help Desk</button>
					</div>
				</form>
			  </div>
		  </div>
		</div>	
		<div class="modal fade" id="exampleModal1" tabindex="-1" aria-labelledby="exampleModalLabel1" aria-hidden="true">
		  <div class="modal-dialog modal-dialog-center">
			<div class="modal-content">
			  <div class="modal-header">
				<h1 class="modal-title fs-5" id="exampleModalLabel1">Invite Employee</h1>
				<button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
			  </div>
			  <div class="modal-body">
					<div class="row">
						<div class="col-xl-12">
							<label class="form-label">Email ID<span class="text-danger">*</span></label>
							<input type="email" class="form-control" placeholder="hello@gmail.com">
							<label class="form-label mt-3">Employment date<span class="text-danger">*</span></label>
							<input class="form-control" type="date">
							<div class="row">
								<div class="col-xl-6">
									<label class="form-label mt-3">First Name<span class="text-danger">*</span></label>
									<div class="input-group">
										<input type="text" class="form-control" placeholder="Name">
									</div>
								</div>
								<div class="col-xl-6">
									<label class="form-label mt-3">Last Name<span class="text-danger">*</span></label>
									<div class="input-group">
										<input type="text" class="form-control" placeholder="Surname">
									</div>
								</div>
							</div>
							<div class="mt-3 invite">
								<label class="form-label">Send invitation email<span class="text-danger">*</span></label>
								<input type ="email" class="form-control " placeholder="+ invite">
							</div>
							
					
						</div>
					</div>
					
			  </div>
			  <div class="modal-footer">
				<button type="button" class="btn btn-danger light" data-bs-dismiss="modal">Close</button>
				<button type="button" class="btn btn-primary">Save changes</button>
			  </div>
			</div>
		  </div>
		</div>
		
<%include ./footer.ejs %>


<script>
	document.getElementById("pointSystem").addEventListener("click", function () {
    fetch("/shopkeeper/getPointSystem") // Replace with your actual API endpoint
        .then(response => response.json())
        .then(data => {
            let tableBody = document.getElementById("pointSystemTable");
            tableBody.innerHTML = ""; // Clear previous data
            
            if (data.length === 0) {
                tableBody.innerHTML = "<tr><td colspan='3'>No data available</td></tr>";
                return;
            }

            data.forEach(item => {
                let row = `<tr style="text-align:left">
                    <td style="text-align:left">${item.activity_name}</td>
                    <td style="text-align:left">${item.points}</td>
                </tr>`;
                tableBody.innerHTML += row;
            });
        })
        .catch(error => console.error("Error fetching point system data:", error));
});

</script>
     